# 第五章 同步时序逻辑电路

## 一、时序逻辑电路概述

### 定义

若逻辑电路在任何时刻产生的稳定输出信号不仅与电路**该时刻**的输入信号有关，还与电路**过去**的输入信号有关，则称为时序逻辑电路。

### 一般结构

<img src="https://gitee.com/Miraclezjy/utoolspic/raw/master/%E6%97%B6%E5%BA%8F%E9%80%BB%E8%BE%91%E7%94%B5%E8%B7%AF%E4%B8%80%E8%88%AC%E7%BB%93%E6%9E%84-2021-12-2318:26:32.png"></img>

### 特点

- 电路由**组合电路**和**存储电路**组成，具有对过去输入进行记忆的功能
- 电路中包含反馈回路，通过反馈使电路功能与”时序“相关
- 电路的输出由电路当时的输入和状态（过去的输入）共同决定

### 分类

- 电路的工作方式
- 电路输出对输入的依从关系
- 输入信号的形式

在研究同步时序逻辑电路时，通常不把同步时钟信号作为输入信号处理，而是将它当成一种默认的时间基准。

#### 按照电路的工作方式分类

- 同步时序逻辑电路
- 异步时序逻辑电路

#### 按照电路输入与输出的关系分类

- Mealy 型：输出是**输入**和**状态**的函数
- Moore 型：输出仅仅是**状态**的函数

##### 区别

- Mealy 型电路的输入和输出之间存在着直接联系
- Moore 型电路则是将全部输入转换成电路状态后再和输出建立联系

##### Moore 型电路的特殊情况

时序逻辑电路没有专门的外部输出信号，而是以电路状态作为输出

#### 按照电路输入信号的形式划分

- 脉冲型
- 电平型

#### 典型的同步时序逻辑电路

- 锁存器
- 寄存器
- 移位寄存器
- 计数器
- 序列信号发生器

### 时序逻辑电路的描述

- 逻辑函数表达式
- 状态图
- 状态表
- 时间图

#### 逻辑函数表达式

- 输出函数表达式

  反映电路**输出**与外部输入和状态之间的关系

- 激励函数表达式

  反映了**存储电路的输入**与外部输入和电路状态之间的关系

- 次态函数表达式

  同步时序电路的**次态**与激励函数和电路现态之间的关系，与触发器类型相关

Moore 型

<img src="https://gitee.com/Miraclezjy/utoolspic/raw/master/Moore%E5%9E%8B%E7%94%B5%E8%B7%AF%E9%80%BB%E8%BE%91%E5%87%BD%E6%95%B0%E8%A1%A8%E8%BE%BE%E5%BC%8F-2021-12-2318:48:52.png"></img>

Mealy 型

<img src="https://gitee.com/Miraclezjy/utoolspic/raw/master/Mealy%E5%9E%8B%E7%94%B5%E8%B7%AF%E9%80%BB%E8%BE%91%E5%87%BD%E6%95%B0%E8%A1%A8%E8%BE%BE%E5%BC%8F-2021-12-2318:50:30.png"></img>

#### 状态表

反映同步时序电路输出 z、次态 $y^{n+1}$ 与电路输入 x、现态 y 之间关系的表格

- Moore 型

  <img src="https://gitee.com/Miraclezjy/utoolspic/raw/master/Moore%E5%9E%8B%E7%8A%B6%E6%80%81%E8%A1%A8-2021-12-2318:53:28.png"></img>

- Mealy 型

  <img src="https://gitee.com/Miraclezjy/utoolspic/raw/master/Mealy%E5%9E%8B%E7%8A%B6%E6%80%81%E8%A1%A8-2021-12-2318:54:20.png"></img>

#### 状态图

反映同步时序电路状态转换规律及相应输入、输出取值关系的有向图

- Mealy 型

  <img src="https://gitee.com/Miraclezjy/utoolspic/raw/master/Mealy%E5%9E%8B%E7%8A%B6%E6%80%81%E5%9B%BE-2021-12-2318:58:08.png"></img>

- Moore 型

  <img src="https://gitee.com/Miraclezjy/utoolspic/raw/master/Moore%E5%9E%8B%E7%8A%B6%E6%80%81%E5%9B%BE-2021-12-2318:58:56.png"></img>

#### 时间图

表示输入信号、输出信号和电路状态的取值在各时刻的对应关系的波形图，通常又称为工作波形图

## 二、同步时序逻辑电路分析

### 分析的方法

- 表格法
- 代数法

<img src="https://gitee.com/Miraclezjy/utoolspic/raw/master/%E5%90%8C%E6%AD%A5%E6%97%B6%E5%BA%8F%E9%80%BB%E8%BE%91%E7%94%B5%E8%B7%AF%E5%88%86%E6%9E%90-2021-12-2319:01:59.png"></img>

#### 表格法

- 流程

  <img src="https://gitee.com/Miraclezjy/utoolspic/raw/master/%E8%A1%A8%E6%A0%BC%E6%B3%95%E5%88%86%E6%9E%90%E6%B5%81%E7%A8%8B-2021-12-2319:05:00.png"></img>

#### 代数法

- 流程

  <img src="https://gitee.com/Miraclezjy/utoolspic/raw/master/%E4%BB%A3%E6%95%B0%E6%B3%95%E5%88%86%E6%9E%90%E6%B5%81%E7%A8%8B-2021-12-2319:12:00.png"></img>

## 三、同步时序逻辑电路设计

- 完全给定同步时序逻辑电路：电路在不同输入取值下都有**确定**的次态和输出
- 不完全给定同步时序逻辑电路：电路中存在**不确定**的次态或输出

### 定义

根据特定的逻辑要求，设计出能实现其逻辑功能的时序逻辑电路

### 目标

使用**尽可能少**的触发器和逻辑门实现预定的逻辑要求

### 流程

<img src="https://gitee.com/Miraclezjy/utoolspic/raw/master/%E5%90%8C%E6%AD%A5%E6%97%B6%E5%BA%8F%E9%80%BB%E8%BE%91%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1-2021-12-2319:53:00.png"></img>

<div align=center><img src="https://gitee.com/Miraclezjy/utoolspic/raw/master/%E5%90%8C%E6%AD%A5%E6%97%B6%E5%BA%8F%E9%80%BB%E8%BE%91%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1%E6%B5%81%E7%A8%8B%E5%9B%BE-2021-12-2320:02:06.png"></div>

#### 1. 原始状态表和状态图

- 建立的一般步骤

<div align=center><img src="https://gitee.com/Miraclezjy/utoolspic/raw/master/%E5%8E%9F%E5%A7%8B%E7%8A%B6%E6%80%81%E5%9B%BE%E5%92%8C%E7%8A%B6%E6%80%81%E8%A1%A8%E5%BB%BA%E7%AB%8B%E6%AD%A5%E9%AA%A4-2021-12-2320:07:42.png"></div>

- 确定电路模型：Mealy or Moore ?

- 设立初始状态
  - 时序逻辑电路在输入信号开始作用之前的状态
  - 从初始状态出发考虑在各种输入作用下的状态转移和输出响应
- 根据需要记忆的信息增加新的状态（即：能不加就不加）
  - 同步时序电路中状态数目的多少取决于**需要记忆和区分的信息量**
  - 若在某个状态下出现的输入信号作用的结果能用已有状态表示，则应转向已有状态
  - 仅当某个状态下出现的输入信号作用的结果不能用已有状态表示时，才令其转向新的状态

- 确定各时刻电路的输出
  - 时序逻辑电路的功能是通过输出对输入的响应来体现的
  - 在建立原始状态图时，必须确定各时刻的输出值
    - 在 Moore 型电路中，应指明每种状态下对应的输出
    - 在 Mealy 型电路中应指明从每一个状态出发，在不同输入作用下的输出值

- 注意：状态数目能否达到最少无关紧要，因为可以对它再进行状态化简

1. 序列检测器

- 一个序列检测器所需要的状态数与要识别的序列长度相关
- 序列越长，需要记忆的代码位数越多，状态数也就越多
- Mealy 型一般比 Moore 型所需状态数少，但不一定比 Moore 型所需触发器少

2. 代码检测器

####  2. 状态化简

##### 定义

从原始状态表中消去多余状态，得到一个描述给定的逻辑功能的包含状态数目达到最少的状态表，即最简状态表或最小化状态表 <br/>

目的：简化电路结构，状态数目的多少直接决定电路中所需触发器数目的多少

- 状态数和所需触发器的关系

  设状态数为 n，所需触发器为 m，则有：$2^m \geq n > 2^{m-1}$

- 方法

  - 观察法
  - 输出分类法
  - 隐含表法

##### 等效状态

状态 $S_i$ 和 $S_j$ 是等效的，记作 $(S_i, S_j)$，又称状态 $S_i$ 和 $S_j$ 为**等效对**

##### 等效状态的判断方法

- 第一，输出相同
- 第二，次态属于下列情况之一：
  1. 次态相同
  2. 次态交错或为各自的现态
  3. 次态循环或为等效对

##### 等效状态的性质

等效状态具有传递性

##### 等效类和最大等效类

##### 化简流程

<div align=center><img
src="https://gitee.com/Miraclezjy/utoolspic/raw/master/%E7%8A%B6%E6%80%81%E5%8C%96%E7%AE%80-2021-12-2320:40:29.png">
</div>

简化后的状态数等于最大等效类的个数

##### 隐含表

”掐头去尾“

##### 寻找等效对

- 顺序比较
- 关联比较

##### 求最大等效类

##### 状态合并

#### 3. 状态编码

给最小化状态表中用字母或数字表示的状态指定一个二进制代码，形成二进制状态表，也称**状态分配**或者**状态赋值**

- 任务

  - 确定状态编码的长度（所需触发器个数）

  - 寻找一种最佳的或接近最佳的状态分配方案，使所设计的时序电路最简单

- 确定二进制代码的位数

- 确定状态分配方案

##### 相邻分配法

相邻分配法的编码原则：

1. 次态相同，现态相邻
2. 同一现态，次态相邻
3. 输出相同，现态相邻

优先顺序：1 -> 3<br/>

一般将初始状态分配为”0“状态

##### 确定触发器数目和类型

##### 确定激励函数和输出函数

##### 触发器的激励表

<div align=center><img
    src="https://gitee.com/Miraclezjy/utoolspic/raw/master/%E5%9B%9B%E7%A7%8D%E5%B8%B8%E7%94%A8%E6%97%B6%E9%92%9F%E6%8E%A7%E5%88%B6%E8%A7%A6%E5%8F%91%E5%99%A8%E7%9A%84%E6%BF%80%E5%8A%B1%E8%A1%A8-2021-12-2320:51:48.png"
</div>

